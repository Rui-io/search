import requests

APP_ID = "a7e3b924"
APP_KEY = "187b5cea2020ad8649002ddcc5f924a2"
URL = "https://api.edamam.com/api/recipes/v2"

# search receipes by ingredient, health, calories range, meal type and return a list of receipes and their urls, and saves them to a file called "THIS_WEEK'S RECEPIES.txt"

# ask for ingredients and calories range and call search_receipes and save_to_file functions

def main():
    ingredients = input("Please select your main ingredients: ").lower()
    calories = input("Please enter calories range for your desired meal (i.e 500-1000): ")
    health = input("Please enter your dietary requirement (i.e. gluten-free, kosher, vegan, diary-free): ").lower()
    mealType = input("Please enter your meal type (i.e. breakfast, lunch, dinner): ").lower()
    receipes = search_receipes(ingredients, calories, health, mealType)
    save_to_file(receipes)

def search_receipes(ingredients, calories,health, mealType):
    params = {
        "app_id": APP_ID,
        "app_key": APP_KEY,
        "q": ingredients,
        "calories": calories,
        "health": health,
        "mealType": mealType,
        "type": "public",
        "to": 5
    }
    response = requests.get(URL, params=params)
    data = response.json()
    receipes = []
    for receipe in data["hits"]:
        receipes.append(receipe["recipe"]["label"])
        receipes.append(receipe["recipe"]["url"])
    return receipes

def save_to_file(receipes):
    with open("THIS_WEEK_RECIPES.txt", "w") as file:
        for receipe in receipes:
            file.write(receipe + "\n")

if __name__ == "__main__":
    main()

# try 'rice', '500-1000', 'gluten-free', 'breakfast' as inputs
